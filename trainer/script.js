
// --- UI/Animation Logic (Designer Agent) ---
document.addEventListener('DOMContentLoaded', () => {const mobileMenuButton = document.getElementById('mobile-menu-button');const mobileMenu = document.getElementById('mobile-menu');const navLinks = document.querySelectorAll('#mobile-menu a, .md\\:flex a');if (mobileMenuButton && mobileMenu) {mobileMenuButton.addEventListener('click', () => {mobileMenu.classList.toggle('hidden');});}navLinks.forEach(link => {link.addEventListener('click', function(e) {const href = this.getAttribute('href');if (href && href.startsWith('#')) {e.preventDefault();const targetId = href.substring(1);const targetElement = document.getElementById(targetId);if (targetElement) {if (!mobileMenu.classList.contains('hidden')) {mobileMenu.classList.add('hidden');}const headerOffset = document.querySelector('header').offsetHeight;const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;const offsetPosition = elementPosition - headerOffset - 20;window.scrollTo({top: offsetPosition,behavior: "smooth"});}}});});});



// --- Backend/Data Logic (Integrator Agent) ---
const firebaseConfig = {apiKey: "AIzaSyBtY_IrbV0TZLNvJ9Nr1h9UQFXygbO0zBQ",authDomain: "landingpages-4d6a8.firebaseapp.com",projectId: "landingpages-4d6a8",storageBucket: "landingpages-4d6a8.firebasestorage.app",messagingSenderId: "745990656140",appId: "1:745990656140:web:367c261db9156b15f66ba9",measurementId: "G-VJGLT3ZYJ6"};const PAGE_DOC_ID = 'fchwn3nc2brmfyrua7waq';firebase.initializeApp(firebaseConfig);const db = firebase.firestore();const auth = firebase.auth();let userId = null;async function updatePageMetrics(metricName) {if (!userId) {console.warn('User ID not available for metrics tracking.');return;}try {const pageRef = db.collection('pages').doc(PAGE_DOC_ID);await pageRef.set({[metricName]: firebase.firestore.FieldValue.increment(1),lastUpdated: firebase.firestore.FieldValue.serverTimestamp()}, { merge: true });} catch (error) {console.error('Error updating page metrics:', error);}}async function initializeFirebaseAndTracking() {try {const userCredential = await auth.signInAnonymously();userId = userCredential.user.uid;console.log('Signed in anonymously with UID:', userId);updatePageMetrics('views');} catch (error) {console.error('Error signing in anonymously:', error);}}document.addEventListener('DOMContentLoaded', () => {initializeFirebaseAndTracking();const trackableElements = document.querySelectorAll('a, .track-link-click');trackableElements.forEach(element => {element.addEventListener('click', () => {updatePageMetrics('clicks');});});const leadForm = document.getElementById('lead-form');if (leadForm) {leadForm.addEventListener('submit', async (event) => {event.preventDefault();if (!userId) {alert('Authentication failed. Please try again.');console.error('User ID is null, cannot submit form.');return;}const submitBtn = document.getElementById('submit-btn');if (submitBtn) {submitBtn.textContent = 'Sending...';submitBtn.disabled = true;}const formData = {};for (const element of leadForm.elements) {if (element.name && element.value && (element.tagName === 'INPUT' || element.tagName === 'SELECT' || element.tagName === 'TEXTAREA')) {formData[element.name] = element.value;}}const data = {...formData,userId: userId,timestamp: firebase.firestore.FieldValue.serverTimestamp()};try {await db.collection('pages').doc(PAGE_DOC_ID).collection('leads').add(data);console.log('Lead submitted successfully!');updatePageMetrics('leads');leadForm.style.display = 'none';const successMessageDiv = document.createElement('div');successMessageDiv.className = 'text-center p-8 bg-green-100 text-green-800 rounded-lg shadow-md';successMessageDiv.innerHTML = '<h3 class="text-2xl font-bold mb-4">Thank You!</h3><p class="text-lg">Your consultation request has been received. We will contact you shortly.</p>';leadForm.parentNode.insertBefore(successMessageDiv, leadForm.nextSibling);} catch (error) {console.error('Error adding lead:', error);alert('There was an error submitting your request. Please try again.');} finally {if (submitBtn) {submitBtn.textContent = 'Book Free Consultation';submitBtn.disabled = false;}}});}});}