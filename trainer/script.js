document.addEventListener('DOMContentLoaded', () => { const form = document.getElementById('lead-form'); const successMsg = document.getElementById('thank-you-msg'); const submitBtn = form ? form.querySelector('button[type="submit"]') : null; if (form) { form.addEventListener('submit', async (e) => { e.preventDefault(); const originalText = submitBtn ? submitBtn.innerText : 'Submit'; if (submitBtn) { submitBtn.innerText = 'Processing...'; submitBtn.disabled = true; } const formData = new FormData(form); const data = Object.fromEntries(formData.entries()); try { const isSaved = await window.submitToBackend(data); if (isSaved) { form.style.display = 'none'; if (successMsg) { successMsg.style.display = 'block'; successMsg.scrollIntoView({ behavior: 'smooth' }); } } else { throw new Error("Submission failed"); } } catch (error) { console.error(error); alert("Connection error. Please try again."); if (submitBtn) { submitBtn.innerText = originalText; submitBtn.disabled = false; } } }); } });