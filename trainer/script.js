document.addEventListener('DOMContentLoaded', () => {const form = document.getElementById('lead-form');const successMsg = document.getElementById('thank-you-msg');if (form) {form.addEventListener('submit', async (e) => {e.preventDefault();const btn = form.querySelector('button[type="submit"]');const originalText = btn.innerText;btn.innerText = 'שולח...';btn.disabled = true;const formData = new FormData(form);const data = Object.fromEntries(formData.entries());try {if (typeof window.submitToBackend === 'function') {const success = await window.submitToBackend(data);if (success) {form.style.display = 'none';if (successMsg) successMsg.style.display = 'block';} else {throw new Error("Submission failed.");}} else {console.error("Backend bridge not found");alert("System Error: Database connection missing.");}} catch (error) {console.error('Error:', error);alert('שליחה נכשלה. אנא נסה שוב.');} finally {if (form.style.display !== 'none') {btn.innerText = originalText;btn.disabled = false;}}});}});console.log('Page Loaded');